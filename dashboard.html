<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - TOPCIT Buddy</title>
    <style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

:root {
    --primary-blue: #2196F3;
    --secondary-blue: #64B5F6;
    --dark-blue: #1565C0;
    --light-blue: #E3F2FD;
    --darker-blue: #0D47A1;
    --success-green: #4caf50;
    --warning-orange: #ff9800;
    --danger-red: #f44336;
    --purple: #9c27b0;
    --text-dark: #212121;
    --text-gray: #757575;
    --bg-light: #f5f7fa;
    --white: #ffffff;
    --shadow: 0 2px 8px rgba(0,0,0,0.1);
    --shadow-lg: 0 4px 16px rgba(0,0,0,0.15);
    --shadow-xl: 0 8px 32px rgba(0,0,0,0.2);
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #E3F2FD 0%, #f5f7fa 100%);
    color: var(--text-dark);
    min-height: 100vh;
    line-height: 1.6;
}

@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.6; }
}

@keyframes shimmer {
    0% { background-position: -1000px 0; }
    100% { background-position: 1000px 0; }
}

.navbar {
    background: var(--white);
    padding: 20px 40px;
    box-shadow: var(--shadow-lg);
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: sticky;
    top: 0;
    z-index: 100;
    backdrop-filter: blur(10px);
}

.nav-brand {
    display: flex;
    align-items: center;
    gap: 16px;
    font-size: 22px;
    font-weight: 700;
    color: var(--dark-blue);
}

.logo-small {
    width: 48px;
    height: 48px;
    background: linear-gradient(135deg, #2196F3 0%, #1565C0 100%);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
    transition: transform 0.3s ease;
}

.logo-small:hover {
    transform: rotate(5deg) scale(1.1);
}

.nav-menu {
    display: flex;
    gap: 32px;
    align-items: center;
}

.nav-menu a {
    color: var(--text-gray);
    text-decoration: none;
    font-weight: 500;
    transition: all 0.3s ease;
    position: relative;
    padding: 8px 16px;
    border-radius: 8px;
}

.nav-menu a:hover {
    color: var(--primary-blue);
    background: var(--light-blue);
    transform: translateY(-2px);
}

.nav-menu a.active {
    color: var(--white);
    background: linear-gradient(135deg, #2196F3 0%, #1565C0 100%);
    box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
}

.nav-menu a.highlight {
    color: var(--primary-blue);
    box-shadow: inset 0 0 0 2px var(--primary-blue), 0 2px 8px rgba(33, 150, 243, 0.2);
    font-weight: 600;
}

.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 40px 24px;
    animation: fadeIn 0.6s ease;
}

.welcome-section {
    margin-bottom: 40px;
    animation: slideUp 0.6s ease;
}

.welcome-section h1 {
    font-size: 42px;
    color: var(--dark-blue);
    margin-bottom: 12px;
    font-weight: 700;
}

.subtitle {
    color: var(--text-gray);
    font-size: 18px;
    font-weight: 500;
}

.readiness-section {
    background: linear-gradient(135deg, #2196F3 0%, #1565C0 100%);
    padding: 40px;
    border-radius: 20px;
    box-shadow: var(--shadow-xl);
    margin-bottom: 48px;
    color: var(--white);
    position: relative;
    overflow: hidden;
    animation: slideUp 0.8s ease;
}

.readiness-section::before {
    content: '';
    position: absolute;
    top: -50%;
    right: -10%;
    width: 300px;
    height: 300px;
    background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
    animation: pulse 3s ease-in-out infinite;
}

.readiness-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 24px;
}

.readiness-title h2 {
    font-size: 28px;
    font-weight: 700;
    margin-bottom: 8px;
}

.readiness-score {
    font-size: 48px;
    font-weight: 700;
    text-shadow: 0 4px 8px rgba(0,0,0,0.2);
}

.readiness-bar-container {
    width: 100%;
    height: 32px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 16px;
    overflow: hidden;
    position: relative;
    box-shadow: inset 0 2px 8px rgba(0,0,0,0.2);
}

.readiness-bar-fill {
    height: 100%;
    background: linear-gradient(90deg, #4CAF50 0%, #66BB6A 100%);
    border-radius: 16px;
    transition: width 1s ease;
    position: relative;
    overflow: hidden;
}

.readiness-bar-fill::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
    animation: shimmer 2s infinite;
}

.readiness-status {
    margin-top: 16px;
    display: flex;
    gap: 24px;
    font-size: 14px;
    font-weight: 500;
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 24px;
    margin-bottom: 48px;
}

.stat-card {
    background: var(--white);
    padding: 32px;
    border-radius: 20px;
    box-shadow: var(--shadow);
    display: flex;
    align-items: center;
    gap: 20px;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.stat-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, var(--primary-blue), var(--secondary-blue));
    transform: scaleX(0);
    transition: transform 0.3s ease;
}

.stat-card:hover::before {
    transform: scaleX(1);
}

.stat-card:hover {
    transform: translateY(-8px);
    box-shadow: var(--shadow-xl);
}

.stat-icon {
    width: 64px;
    height: 64px;
    border-radius: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    transition: transform 0.3s ease;
}

.stat-card:hover .stat-icon {
    transform: scale(1.1) rotate(5deg);
}

.stat-icon.blue {
    background: linear-gradient(135deg, #E3F2FD 0%, #BBDEFB 100%);
    color: var(--primary-blue);
}

.stat-icon.green {
    background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
    color: var(--success-green);
}

.stat-icon.orange {
    background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
    color: var(--warning-orange);
}

.stat-icon.purple {
    background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%);
    color: var(--purple);
}

.stat-info h3 {
    font-size: 36px;
    color: var(--text-dark);
    margin-bottom: 4px;
    font-weight: 700;
}

.stat-info p {
    color: var(--text-gray);
    font-size: 14px;
    font-weight: 500;
}

.action-section {
    margin-bottom: 48px;
    animation: slideUp 0.8s ease;
}

.action-section h2 {
    font-size: 32px;
    color: var(--dark-blue);
    margin-bottom: 32px;
    font-weight: 700;
}

.action-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 24px;
}

.action-card {
    background: var(--white);
    padding: 32px 24px;
    border-radius: 20px;
    box-shadow: var(--shadow);
    text-decoration: none;
    color: var(--text-dark);
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.action-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, var(--primary-blue), var(--secondary-blue));
    transform: scaleX(0);
    transition: transform 0.3s ease;
}

.action-card:hover::before {
    transform: scaleX(1);
}

.action-card:hover {
    transform: translateY(-12px);
    box-shadow: var(--shadow-xl);
}

.action-icon {
    width: 72px;
    height: 72px;
    border-radius: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 20px;
    background: linear-gradient(135deg, #E3F2FD 0%, #BBDEFB 100%);
    color: var(--primary-blue);
    transition: all 0.3s ease;
}

.action-card:hover .action-icon {
    transform: scale(1.1) rotate(10deg);
}

.action-card h3 {
    font-size: 18px;
    margin-bottom: 8px;
    color: var(--dark-blue);
    font-weight: 600;
}

.action-card p {
    color: var(--text-gray);
    font-size: 13px;
    margin-bottom: 16px;
}

.action-badge {
    display: inline-block;
    padding: 6px 14px;
    background: var(--light-blue);
    color: var(--primary-blue);
    border-radius: 20px;
    font-size: 11px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.section-card {
    background: var(--white);
    padding: 40px;
    border-radius: 20px;
    box-shadow: var(--shadow);
    margin-bottom: 32px;
    animation: slideUp 0.6s ease;
}

.section-card h2 {
    font-size: 28px;
    color: var(--dark-blue);
    margin-bottom: 32px;
    font-weight: 700;
}

.weak-areas-section {
    background: var(--white);
    padding: 40px;
    border-radius: 20px;
    box-shadow: var(--shadow);
    animation: slideUp 1s ease;
}

.weak-areas-section h2 {
    font-size: 28px;
    color: var(--dark-blue);
    margin-bottom: 28px;
    font-weight: 700;
}

.weak-areas-list {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.weak-area-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px;
    background: var(--bg-light);
    border-radius: 12px;
    border-left: 4px solid var(--danger-red);
    transition: all 0.3s ease;
}

.weak-area-item:hover {
    transform: translateX(8px);
    box-shadow: var(--shadow);
}

.weak-area-item.medium {
    border-left-color: var(--warning-orange);
}

.weak-area-info h4 {
    font-size: 17px;
    color: var(--text-dark);
    margin-bottom: 6px;
    font-weight: 600;
}

.weak-area-info p {
    font-size: 13px;
    color: var(--text-gray);
}

.weak-area-stat {
    font-size: 24px;
    font-weight: 700;
    color: var(--danger-red);
}

.weak-area-item.medium .weak-area-stat {
    color: var(--warning-orange);
}

.no-data {
    color: var(--text-gray);
    font-style: italic;
    text-align: center;
    padding: 40px;
}

@media (max-width: 968px) {
    .action-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 768px) {
    .navbar {
        padding: 16px 20px;
    }
    
    .nav-menu {
        gap: 16px;
        font-size: 14px;
    }
    
    .stats-grid {
        grid-template-columns: 1fr;
    }
    
    .action-grid {
        grid-template-columns: 1fr;
    }
    
    .welcome-section h1 {
        font-size: 32px;
    }
    
    .readiness-section {
        padding: 28px;
    }
    
    .readiness-header {
        flex-direction: column;
        text-align: center;
    }
}
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-brand">
            <div class="logo-small">
                <svg width="32" height="32" viewBox="0 0 48 48" fill="none">
                    <path d="M24 4L6 14V24C6 34 14 42 24 44C34 42 42 34 42 24V14L24 4Z" fill="white"/>
                    <path d="M24 14L16 18V24C16 28 20 32 24 34C28 32 32 28 32 24V18L24 14Z" fill="#2196F3"/>
                </svg>
            </div>
            <span>TOPCIT Buddy</span>
        </div>
        <div class="nav-menu">
            <a href="dashboard.html" class="active">Dashboard</a>
            <a href="progress.html" class="highlight">Progress</a>
            <a href="achievements.html" class="highlight">Achievements</a>
            <a href="flashcards.html" class="highlight">Flashcards</a>
            <a href="profile.html">Profile</a>
            <a href="#" id="logoutBtn">Logout</a>
        </div>
    </nav>
    
    <div class="container">
        <div class="welcome-section">
            <h1>Welcome back, <span id="userName">Ali</span>! 👋</h1>
            <p class="subtitle">Ready to continue your learning journey?</p>
        </div>
        
        <div class="readiness-section">
            <div class="readiness-header">
                <div class="readiness-title">
                    <h2>TOPCIT Exam Readiness</h2>
                    <p id="readinessStatus">Keep practicing to improve your score</p>
                </div>
                <div class="readiness-score" id="readinessScore">0%</div>
            </div>
            <div class="readiness-bar-container">
                <div class="readiness-bar-fill" id="readinessFill" style="width: 0%"></div>
            </div>
            <div class="readiness-status">
                <span>📊 Completion: <span id="readinessPercent">0%</span></span>
                <span>🔥 Streak: <span id="currentStreak">0 days</span></span>
                <span>📚 Topics: <span id="topicsCovered">0/11</span></span>
            </div>
        </div>
        
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon blue">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                        <polyline points="22 4 12 14.01 9 11.01"/>
                    </svg>
                </div>
                <div class="stat-info">
                    <h3 id="totalQuestions">0</h3>
                    <p>Questions Attempted</p>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon green">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
                    </svg>
                </div>
                <div class="stat-info">
                    <h3 id="accuracy">0%</h3>
                    <p>Overall Accuracy</p>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon orange">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <polyline points="12 6 12 12 16 14"/>
                    </svg>
                </div>
                <div class="stat-info">
                    <h3 id="studyTime">0h</h3>
                    <p>Study Time</p>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon purple">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
                    </svg>
                </div>
                <div class="stat-info">
                    <h3 id="achievements">0</h3>
                    <p>Achievements</p>
                </div>
            </div>
        </div>
        
        <div class="action-section">
            <h2>Quick Actions</h2>
            <div class="action-grid">
                <a href="exam.html" class="action-card exam">
                    <div class="action-icon">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                            <polyline points="14 2 14 8 20 8"/>
                        </svg>
                    </div>
                    <h3>TOPCIT Exam</h3>
                    <p>50 questions • 30 min</p>
                    <span class="action-badge">Full Test</span>
                </a>
                
                <a href="quiz.html" class="action-card quiz">
                    <div class="action-icon">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
                        </svg>
                    </div>
                    <h3>Fast Quiz</h3>
                    <p>10 questions • 5 min</p>
                    <span class="action-badge">Quick</span>
                </a>
                
                <a href="practice.html" class="action-card practice">
                    <div class="action-icon">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 2v20M2 12h20"/>
                        </svg>
                    </div>
                    <h3>Practice Mode</h3>
                    <p>Custom difficulty & topic</p>
                    <span class="action-badge">Custom</span>
                </a>
                
                <a href="flashcards.html" class="action-card flashcards">
                    <div class="action-icon">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="18" height="18" rx="2"/>
                            <path d="M3 9h18"/>
                        </svg>
                    </div>
                    <h3>Flashcards</h3>
                    <p>Study mode</p>
                    <span class="action-badge">Review</span>
                </a>
            </div>
        </div>
        
        <div class="section-card" style="background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%); color: white; text-align: center; padding: 40px 20px; border-radius: 20px; box-shadow: 0 8px 25px rgba(0,0,0,0.25);">
        <h2 style="color: white; font-size: 32px; margin-bottom: 16px;">⭐ Daily Certification Challenge ⭐</h2>
        <p style="font-size: 18px; margin-bottom: 30px; opacity: 0.95;">
            Complete 25 questions in 20 minutes and earn a certificate with 85%+ score!
        </p>
        
        <a href="daily.html"
            style="
            display: inline-block;
            padding: 14px 40px;
            font-size: 18px;
            font-weight: 600;
            color: white;
            border: 2px solid white;
            border-radius: 50px;
            text-decoration: none;
            transition: all 0.3s ease;
            background: transparent;
            position: relative;
            overflow: hidden;
            "
            onmouseover="this.style.background='white'; this.style.color='#FFA500';"
            onmouseout="this.style.background='transparent'; this.style.color='white';">
            Take Today's Challenge
        </a>
        </div>

        
        <div class="weak-areas-section" id="weakAreasSection">
            <h2>Areas to Focus On</h2>
            <div id="weakAreasList" class="weak-areas-list">
                <p class="no-data">Complete some tests to see your weak areas</p>
            </div>
        </div>
    </div>
    
    <script src="js/questions.js"></script>
    <script src="js/main.js"></script>
    <script>
        if (localStorage.getItem('topcit_logged_in') !== 'true') {
            window.location.href = 'index.html';
        }
        
        document.getElementById('logoutBtn').addEventListener('click', (e) => {
            e.preventDefault();
            localStorage.removeItem('topcit_logged_in');
            window.location.href = 'index.html';
        });
        
        function getUserData() {
            const data = localStorage.getItem('topcit_user_data');
            return data ? JSON.parse(data) : null;
        }
        
        function calculateReadinessScore() {
            const userData = getUserData();
            
            if (userData.testsCompleted === 0) {
                return 0;
            }
            
            const examsCompleted = userData.examsCompleted || 0;
            const testsCompleted = userData.testsCompleted;
            
            const highAccuracyTests = userData.testHistory.filter(t => t.score >= 90).length;
            
            const overallAccuracy = (userData.correctAnswers / userData.totalQuestions) * 100;
            
            const topicsCovered = Object.keys(userData.topicPerformance).length;
            const allTopicsCovered = topicsCovered === 11;
            
            let masteredTopics = 0;
            Object.values(userData.topicPerformance).forEach(topic => {
                if (topic.total >= 5) {
                    const accuracy = (topic.correct / topic.total) * 100;
                    if (accuracy >= 90) {
                        masteredTopics++;
                    }
                }
            });
            
            let readiness = 0;
            
            const examScore = Math.min((examsCompleted / 3) * 100, 100);
            readiness += examScore * 0.3;
            
            const testScore = Math.min((highAccuracyTests / 5) * 100, 100);
            readiness += testScore * 0.25;
            
            const accuracyScore = overallAccuracy >= 90 ? 100 : (overallAccuracy / 90) * 100;
            readiness += accuracyScore * 0.2;
            
            const masteryScore = (masteredTopics / 11) * 100;
            readiness += masteryScore * 0.15;
            
            const coverageScore = allTopicsCovered ? 100 : (topicsCovered / 11) * 100;
            readiness += coverageScore * 0.1;
            
            return Math.min(Math.round(readiness), 100);
        }
        
        function getReadinessStatus(score) {
            if (score >= 90) return { text: "Excellent! You're ready!", color: "#4CAF50" };
            if (score >= 75) return { text: "Almost there!", color: "#FF9800" };
            if (score >= 50) return { text: "Keep practicing!", color: "#FF9800" };
            return { text: "Just getting started", color: "#f44336" };
        }
        
        function displayWeakAreas(userData) {
            const weakAreasList = document.getElementById('weakAreasList');
            
            if (Object.keys(userData.topicPerformance).length === 0) {
                return;
            }
            
            const topics = Object.entries(userData.topicPerformance)
                .map(([topic, data]) => ({
                    topic,
                    name: data.topicName,
                    accuracy: data.total > 0 ? (data.correct / data.total) * 100 : 0,
                    total: data.total
                }))
                .filter(t => t.total >= 3)
                .sort((a, b) => a.accuracy - b.accuracy)
                .slice(0, 3);
            
            if (topics.length === 0) {
                return;
            }
            
            weakAreasList.innerHTML = topics.map(t => `
                <div class="weak-area-item ${t.accuracy < 60 ? '' : 'medium'}">
                    <div class="weak-area-info">
                        <h4>${t.name}</h4>
                        <p>${t.total} questions attempted</p>
                    </div>
                    <div class="weak-area-stat">${Math.round(t.accuracy)}%</div>
                </div>
            `).join('');
        }
        
        function loadDashboard() {
            const userData = getUserData();
            const userName = localStorage.getItem('topcit_username') || 'Ali';
            
            document.getElementById('userName').textContent = userName;
            document.getElementById('totalQuestions').textContent = userData.totalQuestions;
            
            const accuracy = userData.totalQuestions > 0 
                ? Math.round((userData.correctAnswers / userData.totalQuestions) * 100) 
                : 0;
            document.getElementById('accuracy').textContent = accuracy + '%';
            
            const hours = Math.floor(userData.studyTime / 3600);
            const minutes = Math.floor((userData.studyTime % 3600) / 60);
            document.getElementById('studyTime').textContent = hours > 0 ? `${hours}h ${minutes}m` : `${minutes}m`;
            
            document.getElementById('achievements').textContent = userData.achievements.length;
            
            const readiness = calculateReadinessScore();
            const status = getReadinessStatus(readiness);
            
            document.getElementById('readinessScore').textContent = readiness + '%';
            document.getElementById('readinessPercent').textContent = readiness + '%';
            document.getElementById('readinessFill').style.width = readiness + '%';
            document.getElementById('readinessStatus').textContent = status.text;
            
            document.getElementById('currentStreak').textContent = `${userData.streaks.current} days`;
            document.getElementById('topicsCovered').textContent = `${Object.keys(userData.topicPerformance).length}/11 topics`;
            
            displayWeakAreas(userData);
        }
        
        loadDashboard();
    </script>
</body>
</html>